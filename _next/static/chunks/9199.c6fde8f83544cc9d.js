"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9199],{29199:function(i,t,n){n.r(t),n.d(t,{default:function(){return j}});var e=n(85893),l=n(67294),r=n(93946),o=n(14564),a=n(51233),d=n(23972),s=n(69397),c=n(98355),u=n(29496),h=n(42076),v=n(41537),m=n(9473),x=n(66781),f=n(94304),p=n(32398);function j(i){let{pool:t}=i;var n,j,C,Z,k,g,b,y;const w=(0,m.I0)(),W=(0,h.Z)("down","xxl"),[E,T]=(0,l.useState)(null),[N,S]=(0,l.useState)("start"),z=(0,m.v9)((i=>i.profile.alarms)),D=Boolean(E),F=D?"simple-popover":void 0,[A]=(0,l.useContext)(v.m),_=(null===(j=t)||void 0===j||null===(n=j.ipfs)||void 0===n?void 0:n.title)?t.ipfs.title:(null===(C=t)||void 0===C?void 0:C.projectTokenName)?t.projectTokenName:"",I=(0,l.useCallback)((async(i,n,e)=>{var l,r;if("start"===n){if(Date.now()+A+5e3>=(null===(r=t)||void 0===r?void 0:r.startTime)-6e4*i)return void(0,u.yv)("Already passed!",{variant:"error"})}else if("claim"===n){if(Date.now()+A+5e3>=t.finalizeTime-6e4*i)return void(0,u.yv)("Already passed!",{variant:"error"})}else if(Date.now()+A+5e3>=t.endTime-6e4*i)return void(0,u.yv)("Already passed!",{variant:"error"});const o={title:"Set alarm for ".concat(_),presaleId:null===(l=t)||void 0===l?void 0:l.address,time:i,status:n,isAlarm:e,timestamp:Date.now()+A};try{const i=await(0,f.Z)(o);await w((0,x.yK)(o,i))}catch(a){console.log(a)}}),[_,null===(Z=t)||void 0===Z?void 0:Z.id,null===(k=t)||void 0===k?void 0:k.startTime,t.finalizeTime,t.endTime,A,w]);return(0,l.useEffect)((()=>{D&&(0,p.Z)()}),[D]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z,{variant:"outlined",size:"small",onClick:i=>{T(i.currentTarget)},sx:{...W&&{height:30,width:30}},children:(0,e.jsx)(c.Z,{icon:"eva:bell-fill"})}),(0,e.jsx)(o.ZP,{id:F,open:D,anchorEl:E,onClose:()=>{T(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,e.jsxs)(a.Z,{sx:{m:3},children:[(0,e.jsx)(d.Z,{variant:"h4",align:"center",children:"REMIND ME"}),(0,e.jsxs)(a.Z,{direction:"row",spacing:3,sx:{my:2},children:[(null===(g=z)||void 0===g?void 0:g.find((i=>i.status===N&&"5"===i.time)))?(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{bgcolor:"action.hover",borderColor:"text.primary"},onClick:()=>I("5",N,!1),children:"5min"}):(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{},onClick:()=>I("5",N,!0),children:"5min"}),(null===(b=z)||void 0===b?void 0:b.find((i=>i.status===N&&"15"===i.time)))?(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{bgcolor:"action.hover",borderColor:"text.primary"},onClick:()=>I("15",N,!1),children:"15min"}):(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>I("15",N,!0),children:"15min"}),(null===(y=z)||void 0===y?void 0:y.find((i=>i.status===N&&"30"===i.time)))?(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{bgcolor:"action.hover",borderColor:"text.primary"},onClick:()=>I("30",N,!1),children:"30min"}):(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>I("30",N,!0),children:"30min"})]}),(0,e.jsx)(d.Z,{variant:"h4",align:"center",sx:{mt:2},children:"BEFORE"}),(0,e.jsx)(a.Z,{direction:"row",spacing:3,sx:{my:2},children:"start"===N?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{bgcolor:"action.hover",borderColor:"text.primary"},children:"Start"}),(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>S("end"),children:"End"}),(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>S("claim"),children:"Claim"})]}):"end"===N?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>S("start"),children:"Start"}),(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{bgcolor:"action.hover",borderColor:"text.primary"},children:"End"}),(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>S("claim"),children:"Claim"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>S("start"),children:"Start"}),(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onClick:()=>S("end"),children:"End"}),(0,e.jsx)(s.Z,{fullWidth:!0,variant:"outlined",sx:{bgcolor:"action.hover",borderColor:"text.primary"},children:"Claim"})]})})]})})]})}},32398:function(i,t,n){function e(){"Notification"in window||alert("This browser does not support desktop notification"),"denied"!==Notification.permission&&Notification.requestPermission()}n.d(t,{Z:function(){return e}})}}]);