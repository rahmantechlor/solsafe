(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8867,6242,4332],{66242:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(87462),s=n(63366),i=n(67294),o=n(90512),a=n(58510),c=n(90948),l=n(71657),d=n(11791),u=n(1977),f=n(8027);function h(e){return(0,f.ZP)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var m=n(85893);const x=["className","raised"],g=(0,c.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"})));var p=i.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCard"}),{className:i,raised:c=!1}=n,d=(0,s.Z)(n,x),u=(0,r.Z)({},n,{raised:c}),f=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},h,t)})(u);return(0,m.jsx)(g,(0,r.Z)({className:(0,o.Z)(f.root,i),elevation:c?8:void 0,ref:t,ownerState:u},d))}))},74421:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return n(16014)}])},93043:function(e,t,n){"use strict";var r=n(66242);const s=(0,n(90948).ZP)(r.Z)((e=>{let{theme:t}=e;return{borderRadius:12,transition:"all .5s",padding:t.spacing(3),overflow:"visible",position:"relative"}}));t.Z=s},16014:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(85893),s=n(67294),i=n(9008),o=n.n(i),a=n(51233),c=n(23972),l=n(69397),d=n(76303),u=n(87536),f=n(16310),h=n(47533),m=n(29496),x=n(60927),g=n(93043),p=n(48740),v=n(26179),b=n(89745),w=n(83809),Z=n(5650),k=n(44777),y=n(58467),T=n(85231),_=n(44718),j=n(54306),A=n(61477),F=n(15229),P=n(21803);function N(){const{connection:e}=(0,_.R)(),{publicKey:t,sendTransaction:n}=(0,j.O)(),i=f.Ry().shape({tokenAddress:f.Z_().required("Token Address is required").test("tokenAddress","Zero adddress is used",(e=>e!==v.pB)).test("tokenAddress","Not valid address",(e=>(0,b.by)(e))),fee:f.Rx().transform((e=>{const t=Number(e);return isNaN(t)?void 0:t})).required("Transfer fee is required").positive("must be greater than 0").max(20,"should not be greater than 20%"),maxFeeToken:f.Rx().transform((e=>{const t=Number(e);return isNaN(t)?void 0:t})).required("This field is required").positive("must be greater than 0")}),x=(0,u.cI)({resolver:(0,h.X)(i),mode:"onChange",defaultValues:{tokenAddress:"",fee:"",maxFeeToken:"",decimals:""}}),{watch:N,setValue:I,formState:{errors:R},trigger:S,clearErrors:E,setError:O,handleSubmit:W}=x,{tokenAddress:C,fee:M,maxFeeToken:$,decimals:B}=N(),[L,q]=(0,s.useState)(!1);(0,s.useEffect)((()=>{let t=!1;return(async()=>{try{if(0===C.length||C===v.pB)return;if((0,b.by)(C)){t||q(!0),E();const n=new A.PublicKey(C),r=await(0,k.ih)(e,n,"confirmed",y.nA);I("decimals",r.decimals);const s=await(0,T.E0)(r);I("fee",s.newerTransferFee.transferFeeBasisPoints/100);const i=(0,F.b)(s.newerTransferFee.maximumFee,r.decimals);I("maxFeeToken",Number(i))}}catch(n){console.log("err message =>",n),O("tokenAddress",{type:"validation",message:"Not spl-2022 token"})}t||q(!1)})(),()=>{t=!0}}),[C,t]);const[U,K]=(0,s.useState)(!1);return(0,r.jsxs)(d.ZP,{methods:x,onSubmit:W((async r=>{let{tokenAddress:s,fee:i,maxFeeToken:o,decimals:a}=r;try{K(!0);const r=new A.PublicKey(s),d=(0,P.v)(String(o),a);let u=(0,Z.L)(r,100*i,d,t);const f=new A.Transaction;f.add(w.Vc),f.add(w.My),f.add(u);const h=await n(f,e,{skipPreflight:!0});if(console.log("tx =>",h),!h)throw new Error("no transaction");{var c,l;const t=await e.confirmTransaction({signature:h});if(console.log(t),null!==(null===(l=t)||void 0===l||null===(c=l.value)||void 0===c?void 0:c.err))throw new Error("tx error");(0,m.yv)("Fee Updated!",{variant:"success"})}}catch(d){console.log("handleSubmit: err =>",d),(0,m.yv)("Something went wrong, failed to updated!",{variant:"error"})}K(!1)})),children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Manage Token"})}),(0,r.jsx)(g.Z,{sx:{p:4,mx:"auto",maxWidth:"800px"},children:(0,r.jsxs)(a.Z,{alignItems:"center",spacing:3,children:[(0,r.jsxs)(a.Z,{sx:{width:"600px",maxWidth:"800px"},spacing:2,children:[(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(c.Z,{variant:"body3",sx:{width:1},children:"Token Address"}),(0,r.jsx)(d.Op,{fullWidth:!0,label:"SPL-2022 Token Address",name:"tokenAddress"})]}),L?(0,r.jsx)(a.Z,{alignItems:"center",children:(0,r.jsx)(p.Z,{})}):0===Object.keys(R).length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(c.Z,{variant:"body3",sx:{width:1},children:"Transfer Fee % (Max fee is 20%)"}),(0,r.jsx)(d.IA,{fullWidth:!0,label:"Transfer Fee",name:"fee"})]}),(0,r.jsxs)(a.Z,{spacing:1,children:[(0,r.jsx)(c.Z,{variant:"body3",sx:{width:1},children:"Maximum amount of fee taken per transfer (in tokens)"}),(0,r.jsx)(d.IA,{fullWidth:!0,label:"Maximum Fee Token",name:"maxFeeToken"})]})]}):""]}),(0,r.jsx)(l.Z,{variant:"outlined",color:"inherit",sx:{minWidth:"200px"},type:"submit",disabled:Object.keys(R).length>0,children:U?(0,r.jsx)(p.Z,{}):"Update"})]})})]})}N.getLayout=e=>(0,r.jsx)(x.Z,{children:e})},5650:function(e,t,n){"use strict";n.d(t,{L:function(){return f}});var r=n(58467),s=n(21236),i=n(76641),o=n(71648),a=n(61477),c=n(39386),l=n(97576),d=n(48764).Buffer;const u=(0,c.struct)([(0,c.u8)("instruction"),(0,c.u8)("transferFeeInstruction"),(0,c.u16)("transferFeeBasisPoints"),(0,l.AW)("maximumFee")]);function f(e,t,n,c){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.nA;if(!(0,r.lP)(l))throw new s.BT;const f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!1}],h=d.alloc(u.span);return u.encode({instruction:i.c.TransferFeeExtension,transferFeeInstruction:o.h6.SetTransferFee,transferFeeBasisPoints:t,maximumFee:n},h),new a.TransactionInstruction({keys:f,programId:l,data:h})}},89745:function(e,t,n){"use strict";n.d(t,{Cb:function(){return l},by:function(){return a},jv:function(){return c}});var r=n(61477),s=n(83809),i=n(40273),o=n(84365);const a=e=>{try{if(!e)return!1;return/^[a-zA-Z0-9]+$/.test(e)}catch(t){return console.log(t),!1}},c=async e=>{try{const t=new r.PublicKey(e);let n=!0;const[a,c]=i.PoolUtil.orderMints(s.e_,t);n=a.toString()===s.e_.toString();const l=i.PDAUtil.getWhirlpool(i.ORCA_WHIRLPOOL_PROGRAM_ID,s.oS,n?s.e_:t,n?t:s.e_,s.Yh).publicKey,d=i.WhirlpoolContext.withProvider(o.Nx.provider,i.ORCA_WHIRLPOOL_PROGRAM_ID),u=(0,i.buildWhirlpoolClient)(d),f=await u.getPool(l,i.IGNORE_CACHE);return console.log("pool_info =>",f),!0}catch(t){return console.log(t),!1}},l={name:"youtubeUrl",message:"Invalid YouTube URL",test:e=>{if(!e)return!0;return/^https?:\/\/(www\.)?youtube\.com\/(embed\/|watch\?v=)[a-zA-Z0-9_-]+(\S*)$/.test(e)}}},21803:function(e,t,n){"use strict";function r(e,t){let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${r}`))&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[e,s,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],o=Math.round(Number(`${s}.${i}`));r=o>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${o}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}n.d(t,{v:function(){return r}})}},function(e){e.O(0,[5675,1664,2488,1023,4958,9969,6886,6349,8930,7530,1592,7487,2312,4642,4694,9284,5955,3450,4365,9774,2888,179],(function(){return t=74421,e(e.s=t);var t}));var t=e.O();_N_E=t}]);