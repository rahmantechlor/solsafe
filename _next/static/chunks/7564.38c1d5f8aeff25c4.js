"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7564],{59997:function(e,n,r){r.d(n,{Z:function(){return c}});var i=r(85893),t=r(67294),a=r(93946),o=r(98355),s=r(39290),l=r(18485);function c(e){let{title:n="Copy",value:r,size:c,buttonSize:d="medium",placement:h="top",...g}=e;const[u,m]=(0,t.useState)(!1),{copy:y}=(0,s.Z)(),x=(0,t.useCallback)((e=>{m(!0),y(e)}),[y]);return(0,i.jsx)(l.Z,{title:u?"Copied!":n,placement:h,children:(0,i.jsx)(a.Z,{onClick:()=>x(r),size:d,onMouseLeave:()=>setTimeout((()=>m(!1)),200),...g,children:(0,i.jsx)(o.Z,{icon:"eva:copy-fill",width:c})})})}},18485:function(e,n,r){r.d(n,{Z:function(){return a}});var i=r(85893),t=r(21023);function a(e){let{className:n,placement:r="top",...a}=e;return(0,i.jsx)(t.Z,{...a,arrow:!0,placement:r,classes:{popper:n},PopperProps:{placement:r,disablePortal:!0,modifiers:[{name:"flip",enabled:!1,options:{altBoundary:!1,rootBoundary:"document",padding:8}},{name:"preventOverflow",enabled:!0,options:{altAxis:!1,altBoundary:!1,tether:!1,rootBoundary:"document",padding:8}}]}})}},39290:function(e,n,r){var i=r(67294);n.Z=function(){const[e,n]=(0,i.useState)(null);return{copiedText:e,copy:async e=>{var r;if(!(null===(r=navigator)||void 0===r?void 0:r.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(e),n(e),!0}catch(i){return console.warn("Copy failed",i),n(null),!1}}}}},97564:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var i=r(85893),t=r(67294),a=r(11163),o=r(66242),s=r(51233),l=r(23972),c=r(50135),d=r(87109),h=r(67720),g=r(69397),u=r(2734),m=r(29496),y=r(59997),x=r(48740),p=r(14340),f=r(46554),w=r(6154),j=r(68485),Z=r(53920),b=r(83809),v=r(26179),k=r(71154),S=r(61477),T=r(54306),C=r(44718),P=r(4818),R=r(58467);function A(e){let{pool:n}=e;const{publicKey:r,sendTransaction:A}=(0,T.O)(),{connection:I}=(0,C.R)(),{program:W,addPriorityFee:M}=(0,k.EF)(),[B,D]=(0,t.useState)(""),E=(0,a.useRouter)(),{id:_}=E.query;(0,t.useEffect)((()=>{let e=!1;return(async()=>{try{if(r&&E&&!e){const e=String(r);D(window.location.origin+"/presale/".concat(_)+"?refer="+e)}}catch(n){console.error(n)}})(),()=>{e=!0}}),[E,r,_]);const F=(0,u.Z)(),[L,O]=(0,t.useState)(0),[z,J]=(0,t.useState)(0n),[K,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{let e,i=!1;return r&&(e=(0,Z.ZP)(v.LB,{query:"account=".concat(String(r))}),(async()=>{try{var t,a;const e=await(0,j.Z)("getReferPoint"),{data:o}=await w.Z.get("/ido/get-refer-point/".concat(null===(t=n)||void 0===t?void 0:t.chain,"/").concat(null===(a=n)||void 0===a?void 0:a.address,"/").concat(String(r)),{headers:{token:e}});!i&&o&&(O(o.referredBuyersCount),J(BigInt(o.amount)),N(o.isWithdrawn))}catch(o){console.error(o)}e.on("Presale:RewardAdded",(e=>{e.address===n.address&&e.chain===n.chain&&J(BigInt(e.totalRewardForReferrer))})),e.on("Presale:RewardWithdrawn",(e=>{e.address===n.address&&e.chain===n.chain&&N(!0)}))})()),()=>{i=!0}}),[n.rewardPercent,n.chain,n.address,r]);const[q,G]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{let e=!1;return q&&(async()=>{try{const e=new S.PublicKey(n.address),[a]=(0,P.c9)(r,e,b.fJ,"referer_seed"),o=new S.PublicKey(n.raiseTokenAddress),[s]=await(0,P.w2)(0,r,o),[l]=await(0,P.w2)(0,e,o),c=await W.methods.claimReward(n.seed).accounts({vendingMachine:e,refererInfo:a,signer:r,tokenProgram:R.H_,associatedTokenProgram:R._u,customMint:"SOL"==n.raiseTokenSymbol?b.fJ:o,authorityCustomMintAta:"SOL"==n.raiseTokenSymbol?b.fJ:s,vendingMachineCustomMintAta:"SOL"==n.raiseTokenSymbol?b.fJ:l,systemProgram:S.SystemProgram.programId,rent:S.SYSVAR_RENT_PUBKEY}).instruction(),d=new S.Transaction;d.add(b.Vc),d.add(M),d.add(c);const h=await A(d,I,{skipPreflight:!0});if(console.log("tx",h),!h)throw new Error("no transaction");{var i,t;const e=await I.confirmTransaction({signature:h});if(console.log(e),null!==(null===(t=e)||void 0===t||null===(i=t.value)||void 0===i?void 0:i.err))throw new Error("tx error");(0,m.yv)("Claim Reward Success!",{variant:"success"})}}catch(a){console.log("isRewardClaiming: err =>",a),(0,m.yv)("Something went wrong, Failed in claiming reward!",{variant:"error"})}e||G(!1)})(),()=>{e=!0}}),[q]),(0,i.jsx)(o.Z,{sx:{p:"2px",marginTop:F.spacing(2),borderRadius:"12px"},children:(0,i.jsx)(s.Z,{sx:{borderRadius:"12px",border:e=>"1px solid ".concat(e.palette.primary.main)},children:(0,i.jsxs)(s.Z,{sx:{padding:F.spacing(3)},children:[(0,i.jsx)(s.Z,{alignItems:"center",mb:1,children:(0,i.jsxs)(s.Z,{direction:"row",children:[(0,i.jsx)(l.Z,{children:"Sale Referral Program"}),(0,i.jsx)(p.Z,{description:n.rewardPercent>0?"Share your referral link to earn money and Gem Points with every buy you generate!":"Share your referral link and earn Gem Points!",readMore:"https://gempad.gitbook.io/the-gempad/"})]})}),(0,i.jsx)(s.Z,{direction:"row",sx:{my:"10px"},children:(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,children:"Share your referral link:"})}),(0,i.jsx)(s.Z,{direction:"row",justifyContent:"center",children:(0,i.jsx)(c.Z,{fullWidth:!0,label:"",type:"string",value:B,disabled:!0,InputProps:{style:{fontSize:12,color:"text.primary"},endAdornment:(0,i.jsx)(d.Z,{position:"end",children:(0,i.jsx)(y.Z,{value:B})})},sx:{width:1,"& .MuiInputBase-input.Mui-disabled":{WebkitTextFillcolor:"text.primary"}}})}),(0,i.jsx)(h.Z,{sx:{my:1.5}}),n.rewardPercent>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Pool Reward Percent"}),(0,i.jsx)(l.Z,{variant:"body2",align:"right",fontWeight:300,children:String(n.rewardPercent)+" %"})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Referrer Count"}),(0,i.jsx)(l.Z,{variant:"body2",align:"right",color:"primary.main",fontWeight:300,children:L})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Total Reward Amount"}),(0,i.jsxs)(s.Z,{direction:"row",spacing:.5,sx:{textAlign:"right"},children:[(0,i.jsx)(l.Z,{variant:"body2",align:"right",color:"primary.main",fontWeight:300,children:(0,f.A8)(n.totalRaised*BigInt(Math.floor(n.rewardPercent))/100n,n.raiseTokenDecimals)}),(0,i.jsx)(l.Z,{variant:"body2",align:"right",fontWeight:300,children:n.raiseTokenSymbol})]})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Total Deposited via Refer"}),(0,i.jsxs)(s.Z,{direction:"row",spacing:.5,sx:{textAlign:"right"},children:[(0,i.jsx)(l.Z,{variant:"body2",align:"right",color:"primary.main",fontWeight:300,children:(0,f.A8)(n.totalDepositAmount,n.raiseTokenDecimals)}),(0,i.jsx)(l.Z,{variant:"body2",align:"right",fontWeight:300,children:n.raiseTokenSymbol})]})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Deposited amount via My Referral Link"}),(0,i.jsxs)(s.Z,{direction:"row",spacing:.5,sx:{textAlign:"right"},children:[(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,align:"right",color:"primary.main",children:(0,f.A8)(z,n.raiseTokenDecimals)}),(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,align:"right",children:n.raiseTokenSymbol})]})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"My Referral Bonus Amount"}),(0,i.jsxs)(s.Z,{direction:"row",spacing:.5,sx:{textAlign:"right"},children:[(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,align:"right",color:"primary.main",children:z>0n?(0,f.A8)(n.totalRaised*BigInt(Math.floor(n.rewardPercent))/100n*z/n.totalDepositAmount,n.raiseTokenDecimals):0}),(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,align:"right",children:n.raiseTokenSymbol})]})]}),(1===n.status||2===n.status)&&z>0n&&(K?(0,i.jsx)(s.Z,{alignItems:"center",children:(0,i.jsx)(g.Z,{variant:"contained",color:"primary",disabled:!0,sx:{width:"70%",color:"text.primary","&:hover":{bgcolor:"success.main"},my:1.5},children:(0,i.jsx)(l.Z,{children:"Reward Claimed"})})}):(0,i.jsx)(s.Z,{alignItems:"center",children:(0,i.jsx)(g.Z,{variant:"contained",color:"primary",onClick:()=>G(!0),disabled:!r,sx:{width:"70%",color:"text.primary","&:hover":{bgcolor:"success.main"},my:1.5},children:q?(0,i.jsx)(x.Z,{}):(0,i.jsx)(l.Z,{children:"Claim Reward"})})}))]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Referrer Count"}),(0,i.jsx)(l.Z,{variant:"body2",align:"right",color:"primary.main",fontWeight:300,children:L})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Total Deposited via Refer"}),(0,i.jsxs)(s.Z,{direction:"row",spacing:.5,sx:{textAlign:"right"},children:[(0,i.jsx)(l.Z,{variant:"body2",align:"right",color:"primary.main",fontWeight:300,children:(0,f.A8)(n.totalDepositAmount,n.raiseTokenDecimals)}),(0,i.jsx)(l.Z,{variant:"body2",align:"right",fontWeight:300,children:n.raiseTokenSymbol})]})]}),(0,i.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,i.jsx)(l.Z,{variant:"body2",align:"left",children:"Deposited amount via My Referral Link"}),(0,i.jsxs)(s.Z,{direction:"row",spacing:.5,sx:{textAlign:"right"},children:[(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,align:"right",color:"primary.main",children:(0,f.A8)(z,n.raiseTokenDecimals)}),(0,i.jsx)(l.Z,{variant:"body2",fontWeight:300,align:"right",children:n.raiseTokenSymbol})]})]})]})]})})})}}}]);